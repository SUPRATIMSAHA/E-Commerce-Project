<%- include("../partials/header.ejs", {style: ["style", "account"], title: "My Orders | ShopMyCart"}) %>
<%- include("../partials/navbar.ejs", {active: ""}) %>


<div class="container" style="margin-top: 20px;">
    <%- include('../partials/flash.ejs') %>
    <div class="row">
        <% if (orders.length > 0) { %>
        <div class="head border fw-bold p-2 bg-white">
            My Orders
        </div>
        <% for (let order of orders) { %>
        <% for (let item of order.orderedProducts) { %>
        <div class="card mt-2 p-2">
            <div class="row g-0">
                <div class="col-lg-3 col-md-4 col-sm-5 d-flex justify-content-center">
                    <img style="height: 150px;" src="<%= item.product.img %>" alt="...">
                </div>
                <div class="col-lg-4 col-md-4 col-sm-3">
                    <div class="card-body text-center">
                        <h5 class="card-title"><%= item.product.name %></h5>
                        <p class="fs-5 fw-bold text-success">&#8377 <%= item.product.price * item.quantity %></p>
                        <small>Quantity: <%= item.quantity %></small>
                    </div>
                </div>
                <div class="col-lg-5 col-sm-4">
                    <div class="card-body text-center">
                        <p>Transaction Id: <%= order.txnid %></p>
                        <p>Date:
                            <%=  order.date.toLocaleDateString("en-US", { year: 'numeric', month: 'long', day: 'numeric' }) %>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
        <% } %>
        <% } else{ %>
        <div class="col-12">
            <div class="body d-flex flex-column justify-content-center bg-white align-items-center"
                style="min-height: calc(100vh - 150px);">
                <p style="font-size: 22px;">Your orders is empty!</p>
                <p style="font-size: 13px;">Shop something now.</p>
                <a class="btn btn-primary ps-5 pe-5" href="/products">Shop now</a>
            </div>
        </div>
        <% } %>
    </div>
</div>



<%- include("../partials/footer.ejs", {scripts: []})%>